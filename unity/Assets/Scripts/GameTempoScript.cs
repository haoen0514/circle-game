using UnityEngine;
using UnityEngine.SceneManagement;
using System.Collections;
using System.Collections.Generic;
public class GameTempoScript : MonoBehaviour {

//	public List<bool> gameTempo = new List<bool> ();
	public List<GameObject> eightPieces = new List<GameObject>();
	public int[,] innerGameTempo = new int[60, 8] {
		{ 0, 0, 0, 0, 0, 0, 0, 0 }, // 0
		{ 1, 0, 0, 0, 0, 0, 0, 0 },
		{ 1, 0, 0, 0, 0, 0, 0, 0 },
		{ 1, 0, 0, 0, 0, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },	// 4
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 0, 0, 0, 0 }, // 8
		{ 1, 0, 0, 0, 0, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 }, // 12
		{ 1, 0, 0, 0, 4, 0, 0, 0 },	
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 2, 0, 4, 0, 0, 0 }, // 16
		{ 1, 0, 2, 0, 4, 0, 0, 0 },
		{ 1, 0, 2, 0, 4, 0, 0, 0 },
		{ 1, 0, 2, 0, 4, 0, 0, 0 },	
		{ 1, 0, 2, 0, 4, 0, 2, 0 }, // 20
		{ 1, 0, 2, 0, 4, 0, 2, 0 },
		{ 1, 0, 2, 0, 4, 0, 2, 0 },
		{ 1, 0, 2, 0, 4, 0, 2, 0 },
		{ 1, 0, 4, 0, 4, 0, 4, 0 }, // 24
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 }, // 28
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 }, // 32
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },	
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 }, // 36
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 0, 0 },
		{ 1, 0, 6, 0, 4, 0, 0, 0 },	// 40
		{ 1, 0, 6, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 0, 4, 0, 6, 0 },	
		{ 1, 0, 0, 0, 4, 0, 6, 0 },
		{ 1, 0, 0, 0, 4, 5, 0, 0 }, // 44
		{ 1, 0, 0, 0, 4, 5, 0, 0 },
		{ 1, 0, 3, 0, 4, 0, 0, 0 },
		{ 1, 0, 3, 0, 4, 0, 0, 0 },
		{ 1, 0, 0, 7, 4, 0, 0, 0 },	// 48
		{ 1, 0, 0, 7, 4, 0, 0, 0 },
		{ 1, 0, 0, 5, 4, 0, 0, 0 },
		{ 1, 0, 0, 5, 4, 0, 0, 0 }, 
		{ 1, 0, 0, 5, 4, 0, 3, 0 }, // 52
		{ 1, 0, 0, 5, 4, 0, 3, 0 },
		{ 1, 0, 3, 0, 4, 0, 3, 0 },
		{ 1, 0, 3, 0, 4, 0, 3, 0 },
		{ 1, 3, 3, 0, 4, 0, 3, 0 }, // 56
		{ 1, 3, 3, 0, 4, 0, 3, 0 },	
		{ 1, 0, 0, 0, 0, 0, 0, 0 },
		{ 1, 0, 0, 0, 0, 0, 0, 0 },
	};
	public int[,] outerGameTempo = new int[60, 16]{
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // 0
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // 4
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // 8
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, 
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // 12
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // 16
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // 20
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // 24
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 6, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }, // 28
		{ 6, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 6, 0, 6, 0, 6, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 6, 0, 6, 0, 6, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0 },
		{ 6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 0, 0, 0, 0 }, // 32
		{ 6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 0, 0, 0, 0 },
		{ 6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 6, 0 },
		{ 6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 6, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 }, // 36
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 }, 
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 }, // 40
		{ 6, 0, 6, 0, 6, 0, 6, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 }, 
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 }, // 44
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 }, // 48
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 }, 
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 }, // 52
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },  // 56
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
		{ 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0 },
	};
	public int tempo = 1;
	public int bpm;
	public bool start = false;
	private float timer = 0f;
	private int currentCount = 0;
	private float roundPerMin;
	public float secPerRound;
	public Setup setup;
	private AudioSource audio;
	public GameObject sixteenEnemy;
	public GameObject eightEnemy;
	public PointerMovementScript pointerMovement;
	public Hintscript hint;

	// Use this for initializations
	void Start () {
		roundPerMin = bpm / 4f;
		secPerRound = 60 / roundPerMin;
	}

	
	// Update is called once per frame
	void Update () {
//		if (Input.GetKeyDown (KeyCode.Return))
//			start = !start;

		if (start == true) {
			if (pointerMovement.spawn) {
				Spawn ();
				hint.Hint();
				pointerMovement.spawn = false;
				timer = 0f;
			}
		}
		timer += Time.deltaTime;
		if(start == false){
			currentCount = 0;	
		}
	}
	void Spawn(){
		for(int i = 0; i < 8; i++){
			if (innerGameTempo [currentCount, i] != 0) {
				eightEnemy.transform.GetChild (i).GetComponent<EnemySpawnPointScript> ().SpawnEnemy (innerGameTempo [currentCount, i]);
			}
		}
		for(int i = 0; i < 16; i++){
			if (outerGameTempo [currentCount, i] != 0) {
				sixteenEnemy.transform.GetChild (i).GetComponent<EnemySpawnPointScript> ().SpawnEnemy (outerGameTempo [currentCount, i]);
			}
		}

		if (currentCount == innerGameTempo.GetLength(0) - 1) {
			GameOver ();
		}

		currentCount += 1;
	}

	void GameOver() {
		SceneManager.LoadScene ("GameOver");
	}
}
